---
import Button from "../../ui/Button.astro";

interface Cta {
  label: string;
  href: string;
}

interface BentoCard {
  title: string;
  description: string;
  value?: string;
}

interface Props {
  id?: string;
  slot?: string;
  eyebrow?: string;
  title?: string;
  titleHtml?: string;
  description?: string;
  primaryCta?: Cta;
  secondaryCta?: Cta;
  bentoCards?: BentoCard[];
  backgroundImageSrc?: string;
  backgroundImageAlt?: string;
}

const {
  id = "modern-page-hero-bento",
  slot,
  eyebrow,
  title,
  titleHtml,
  description,
  primaryCta,
  secondaryCta,
  bentoCards = [],
  backgroundImageSrc = "https://images.pexels.com/photos/28942196/pexels-photo-28942196.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=1200&w=2000",
  backgroundImageAlt = "Vnitřek elektrického rozvaděče s vodiči",
} = Astro.props;

const resolvedBentoCards =
  bentoCards.length > 0
    ? bentoCards
    : [
        {
          title: "Klatovy a okolí",
          description: "Rychlé výjezdy po regionu a spolehlivé termíny.",
          value: "< 24h",
        },
        {
          title: "Diagnostika",
          description: "Přesná lokalizace závad měřící technikou.",
          value: "99%",
        },
        {
          title: "Revize",
          description: "Kompletní výstupy a doporučení dalšího postupu.",
          value: "ČSN",
        },
        {
          title: "Servis 7/7",
          description: "Domluva termínu dle vašich možností.",
        },
      ];

const [cardOne, cardTwo, cardThree] = [
  resolvedBentoCards[0] ?? {
    title: "Rychlý výjezd",
    description: "Termín bez průtahů.",
    value: "< 24h",
  },
  resolvedBentoCards[1] ?? {
    title: "Diagnostika",
    description: "Přesná lokalizace závad.",
    value: "99%",
  },
  resolvedBentoCards[2] ?? { title: "Revize", description: "Kompletní výstup.", value: "ČSN" },
];
---

<section slot={slot} id={id} class="relative isolate overflow-hidden bg-neutral-800/95 py-32 lg:py-64">
  <div class="absolute inset-0">
    <img
      src={backgroundImageSrc}
      alt={backgroundImageAlt}
      class="h-full w-full object-cover object-center"
      loading="lazy"
    />
  </div>

  <div
    class="absolute inset-0 bg-gradient-to-r from-neutral-800/95 via-neutral-800/80 to-neutral-800/95"
  >
  </div>
  <div
    class="absolute inset-0 bg-gradient-to-b from-neutral-800/55 via-transparent to-neutral-800/80"
  >
  </div>
  <div class="absolute inset-0 bg-neutral-800/40"></div>
  <div class="mask-image-gradient absolute inset-0 bg-grid-pattern-dark opacity-20"></div>

  <div class="relative z-10 mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="grid items-center gap-16 lg:grid-cols-2">
      <div class="flex flex-col space-y-8">
        {
          eyebrow ? (
            <p class="mb-10 w-fit rounded border border-accent-primary/70 px-3 py-2 text-xs font-bold uppercase tracking-widest text-accent-primary/70">
              {eyebrow}
            </p>
          ) : null
        }

        {
          titleHtml ? (
            <h1
              class="mt-4 font-sora text-4xl font-semibold text-neutral-50 sm:text-5xl xl:text-6xl"
              set:html={titleHtml}
            />
          ) : title ? (
            <h1 class="mt-4 font-sora text-4xl font-semibold text-neutral-50 sm:text-5xl lg:text-6xl">
              {title}
            </h1>
          ) : null
        }

        {
          description ? (
            <p class="mt-4 text-base leading-relaxed text-neutral-300 sm:text-lg">{description}</p>
          ) : null
        }

        {
          primaryCta || secondaryCta ? (
            <div class="mt-6 flex flex-col gap-4 sm:flex-row sm:items-center">
              {primaryCta ? (
                <Button variant="primary" href={primaryCta.href} size="md">
                  {primaryCta.label}
                </Button>
              ) : null}
              {secondaryCta ? (
                <Button
                  variant="outline"
                  href={secondaryCta.href}
                  class="hidden sm:inline-flex"
                  size="md"
                >
                  {secondaryCta.label}
                </Button>
              ) : null}
            </div>
          ) : null
        }
      </div>

      <div class="relative flex w-full items-center aspect-[4/3] lg:h-[600px] lg:aspect-auto">
        <div class="relative w-full">
          <div class="absolute -inset-4 rounded-lg"></div>

          <div class="relative z-10 sm:p-5">
            <div class="grid grid-cols-1 gap-3 sm:gap-4 lg:grid-cols-4">
              {
                [cardOne, cardTwo, cardThree].map((card, index) => (
                  <article
                    class:list={[
                      "rounded-lg border border-neutral-700/40 bg-neutral-800/95 p-4 sm:p-5 shadow-2xl",
                      index === 0 ? "lg:col-start-2 lg:-col-end-1 lg:row-start-1" : "",
                      index === 1 ? "lg:col-start-1 lg:col-end-4 lg:row-start-2" : "",
                      index === 2 ? "lg:col-start-2 lg:-col-end-1 lg:row-start-3" : "",
                    ]}
                  >
                    <p class="text-[11px] font-bold uppercase tracking-[0.2em] text-accent-primary/80">
                      {card.value ?? "Služba"}
                    </p>
                    <h3 class="mt-3 text-sm font-semibold uppercase tracking-wide text-neutral-50 sm:text-base">
                      {card.title}
                    </h3>
                    <p class="mt-2 text-xs leading-relaxed text-neutral-300 sm:text-sm">
                      {card.description}
                    </p>
                  </article>
                ))
              }
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
