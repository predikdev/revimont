---
import { Phone, Menu } from "@lucide/astro";

import LogoInline from "./LogoInline.astro";
import Navigation from "./Navigation.astro";
import MobileNavigation from "./MobileNavigation.astro";
import Button from "../ui/Button.astro";
---

<header
  id="site-header"
  class="group fixed inset-x-0 top-0 z-50 transition-all duration-300 py-2"
  data-scrolled="false"
>
  <div id="content" class="container mx-auto flex items-center justify-between py-4">
    <div id="logo-light" class="transition-opacity duration-300">
      <LogoInline class="w-44 sm:w-48" />
    </div>
    <Navigation />

    <div class="hidden lg:flex items-center gap-4">
      <a
        href="tel:+420775736112"
        class="flex items-center gap-2 text-neutral-50/75 hover:text-accent-primary transition-colors"
      >
        <Phone class="w-4 h-4 transition-all" aria-hidden="true" />
        <span class="text-sm font-medium">+420 775 736 112</span>
      </a>
      <Button variant="primaryDark" href="/kontakt">Poptávka</Button>
    </div>

    <button
      type="button"
      aria-label="Otevřít menu"
      data-menu-open
      class="lg:hidden text-neutral-50/90 group-data-[scrolled=true]:text-neutral-50 transition hover:text-neutral-50"
    >
      <Menu class="h-6 w-6" />
    </button>
  </div>
</header>

<MobileNavigation />

<script is:inline>
  (function () {
    const header = document.getElementById("site-header");
    if (!header) return;

    function updateHeader() {
      const scrolled = window.scrollY > 30;
      header.classList.toggle("bg-neutral-800/95", scrolled);
      header.classList.toggle("backdrop-blur-sm", scrolled);
      header.classList.toggle("shadow-lg", scrolled);
      header.classList.toggle("py-2", !scrolled);
      header.setAttribute("data-scrolled", String(scrolled));
    }

    window.addEventListener("scroll", updateHeader);
    updateHeader();
  })();
</script>
