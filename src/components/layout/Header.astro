---
import { Phone, Menu } from "@lucide/astro";

import LogoInline from "./LogoInline.astro";
import Navigation from "./Navigation.astro";
import Button from "../ui/Button.astro";
import { COMPANY } from "../../data/company";
---

<header
  id="site-header"
  class="group fixed inset-x-0 top-0 z-50 py-2 transition-all duration-300"
  data-scrolled="false"
>
  <div
    id="content"
    class="container mx-auto flex items-center justify-between py-4"
  >
    <div id="logo-light" class="transition-opacity duration-300">
      <LogoInline class="w-44 sm:w-48" />
    </div>
    <Navigation />

    <div class="hidden items-center gap-4 lg:flex">
      <a
        href={`tel:${COMPANY.phoneHref}`}
        class="hover:text-accent-primary flex items-center gap-2 text-neutral-50/75 transition-colors"
      >
        <Phone class="h-4 w-4 transition-all" aria-hidden="true" />
        <span class="text-sm font-medium">{COMPANY.phoneDisplay}</span>
      </a>
      <Button variant="primaryDark" href="/kontakt">Poptávka</Button>
    </div>

    <button
      type="button"
      aria-label="Otevřít menu"
      aria-controls="mobile-menu-v2"
      aria-expanded="false"
      aria-haspopup="dialog"
      data-menu-open
      class="text-neutral-50/90 transition group-data-[scrolled=true]:text-neutral-50 hover:text-neutral-50 lg:hidden"
    >
      <Menu class="h-6 w-6" />
    </button>
  </div>
</header>

<script is:inline>
  (function () {
    const header = document.getElementById("site-header");
    if (!header) return;

    function updateHeader() {
      const scrolled = window.scrollY > 30;
      header.classList.toggle("bg-neutral-800/95", scrolled);
      header.classList.toggle("backdrop-blur-sm", scrolled);
      header.classList.toggle("shadow-lg", scrolled);
      header.classList.toggle("py-2", !scrolled);
      header.setAttribute("data-scrolled", String(scrolled));
    }

    window.addEventListener("scroll", updateHeader);
    updateHeader();
  })();
</script>
